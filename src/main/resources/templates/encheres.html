<!DOCTYPE html>
<html lang="fr" xmlns:sec="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Enchères</title>
    <link href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.2/dist/darkly/bootstrap.min.css" rel="stylesheet">

</head>
<body>

<header th:replace="~{fragments/entete :: frag-entete}">
</header>
<div class="text-center">
    <div th:if="${param.logout}" class="text-success">
        Vous avez été déconnecté avec succès.
    </div>
</div>
<main class="container">

<div class="border rounded p-4 shadow">
    <h1 class="mt-4 m-3 text-center text-warning">Liste des enchères</h1>

    <div class="row text-center">

        <div th:if="${supError}" class="alert alert-warning text-center mt-4">
            <h2 th:text="${supError}"></h2>
        </div>
        <div th:if="${success}" class="alert alert-success text-center mt-4">
            <h2 th:text="${success}"></h2>
        </div>

        <form th:action="@{/encheresCategorie}" method="get" th:object="${articleVenduDto}">
            <div class="d-flex justify-content-center flex-wrap">
                <div class="col-3 m-3 text-start">
                    <Label for="lettreRecherche" class="form mb-1 text-start">Filtres : </Label>
                    <input type="text" name="lettreRecherche" id="lettreRecherche" class="form-control col-3 text-center">
                </div>
                <div class="col-3 m-3 text-start">
                    <label for="noCategorie" class="form mb-1">Catégorie :</label>
                    <select id="noCategorie"
                            th:field="*{noCategorie}"
                            class="form-control col-3">
                        <option th:each="categorie : ${@categorieServiceImpl.findAllCategorie()}"
                                th:text="${categorie.libelle}"
                                th:value="${categorie.noCategorie}">
                        </option>
                    </select>
                </div>
                <div class="col-6 mt-4 mb-3 text-center">
                    <input type="submit" value="Rechercher" class="btn btn-primary m-3">
                </div>
            </div>

        </form>
    </div>

    <div class="d-flex flex-wrap justify-content-center">
        <div class="card col-3 m-3 text-center" style="width: 18rem;" th:each="article : ${listeArticleVendu}">
            <!--<img src="..." class="card-img-top" alt="...">-->
            <div class="card-body text-center">
                <h3 class="card-title text-center" th:text="${article.nomArticle}"></h3>
                <p class="card-text text-center">
                    Mise à prix : <span th:text="${article.miseAPrix}"></span> crédit
                </p>

                <p class="card-text text-center">
                    Fin de l'enchère le
                    <span th:text="${#temporals.format(article.dateFinEnchere, 'dd/MM/yyyy')}"></span>
                    à
                    <span th:text="${#temporals.format(article.dateFinEnchere, 'HH:mm')}"></span>
                </p>


                <p class="card-text text-center">
                    Vendeur :
                    <span th:text="${article.vendeur}" sec:authorize="isAnonymous()"></span>
                    <a
                        th:href="@{/profilVendeur/{pseudo}(pseudo=${article.vendeur})}"
                        th:text="${article.vendeur}" class="link-offset-2 link-underline link-underline-opacity-75"
                        sec:authorize="isAuthenticated()"
                    ></a>
                </p>
                <a th:href="@{/detail-vente/{id}(id=${article.getNoArticle()})}" class="btn btn-primary"
                   sec:authorize="isAuthenticated()">Détail Vente</a>
            </div>
        </div>
    </div>
</div>
</main>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>